<div data-ng-init="fetchData()">
    <h1>Time reporting</h1>
    <form name="projectSelector">
        <lable for="selectProject">Select project: </lable>
        <select name="selectProject" id="selectProject" ng-Model="projects.selectProject">
            <option ng-repeat="project in projects.availableProjects" value="{{project.id}}">{{project.name}}</option>
        </select>
    </form>

        <table ng-if="tableInformation" class="table table-hover table-striped">
        <thead>
            <th>Name</th>
            <th>Project</th>
            <th>Time</th>
            <th>Text</th>
            <th>Created</th>
        </thead>
        <tbody>
            <tr ng-repeat="report in tableInformation | filter: {project : projects.selectProject}">
                <td>{{report.name}}</td>
                <td>{{report.project}}</td>
                <td>{{report.time}}</td>
                <td>{{report.text}}</td>
                <td>{{report.created_at | date : 'yyyy-MMM-dd HH:mm'}}</td>
                <td>
                    <button ng-click="deleteReport(report.id)">Delete</button>
                </td>
            </tr>

        </tbody>
        </table>


    <form name='addReportForm' ng-submit="addReportForm.$valid && addReport(tableInformation)" novalidate>
        <input type="text" ng-model="form.name" placeholder="Name" required>
        <input type="number" ng-model="form.project" placeholder="Project Number" required>
        <input type="number" ng-model="form.time" placeholder="Time spent" required>
        <input type="text" ng-model="form.text" placeholder="Comment" required>
        <input type="submit" value="Submit" />
    </form>

    <burndown-chart ng-if="tableInformation" val = tableInformation></burndown-chart>

    </div>
